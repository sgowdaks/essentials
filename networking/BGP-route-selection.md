BGP doesn't just look at the shortest physical path (like OSPF does); it looks at **Path Attributes (PAs)** to decide which way is "best" based on business logic and policy.

Think of Path Attributes as the **metadata** attached to every route.

---

## 1. The Categories of Path Attributes

Not all attributes are created equal. BGP categorizes them based on whether every router must understand them and whether they must be passed on to the next neighbor.

| Category | Description | Examples |
| --- | --- | --- |
| **Well-Known Mandatory** | Every BGP router **must** recognize these, and they **must** be included in every update. | AS-Path, Next-Hop, Origin |
| **Well-Known Discretionary** | Every router recognizes them, but they are **optional** to include. | Local Preference, Atomic Aggregate |
| **Optional Transitive** | Routers might not recognize them, but they **must pass them on** to the next peer. | Community, Aggregator |
| **Optional Non-Transitive** | If a router doesn't recognize it, it just **ignores/drops** it and doesn't pass it on. | MED (Multi-Exit Discriminator) |

---

## 2. The Heavy Hitters (The Attributes You’ll Use Most)

### A. AS-Path (Well-Known Mandatory)

This is a list of every Autonomous System (AS) the route has traveled through.

* **Purpose:** Loop prevention. If a router sees its own AS number in the list, it drops the update.
* **Decision:** BGP prefers the **shortest** AS-Path.

### B. Next-Hop (Well-Known Mandatory)

This is the IP address used to reach the destination.

* **Crucial Rule:** In eBGP, the Next-Hop changes to the IP of the router sending the update. In iBGP, the Next-Hop **does not change** by default (this is why we often need the `next-hop-self` command).

### C. Local Preference (Well-Known Discretionary)

This tells routers **inside** your AS which path to take to exit the AS.

* **Scope:** Stays within your AS (iBGP). It is never sent to eBGP peers.
* **Decision:** Higher is better (Default is usually 100).

### D. MED - Multi-Exit Discriminator (Optional Non-Transitive)

This is used to tell an **adjacent AS** which entry point into *your* network is preferred.

* **Scope:** Sent to eBGP peers to influence their incoming traffic.
* **Decision:** Lower is better (think of it as "cost").

---

## 3. The BGP Best Path Selection Algorithm

When a router receives multiple paths to the same destination, it runs this "tie-breaker" list in order. As soon as one path wins a step, the process stops.

1. **Weight** (Cisco Proprietary): Higher is preferred. (Local to the router only).
2. **Local Preference**: Higher is preferred. (Internal to the AS).
3. **Locally Originated**: Routes generated by the router itself (`network` command) are preferred over learned routes.
4. **AS-Path**: Shortest list wins.
5. **Origin Type**: IGP (i) is preferred over Exterior (e) or Incomplete (?).
6. **MED**: Lowest value wins.
7. **Neighbor Type**: eBGP paths are preferred over iBGP paths.
8. **IGP Metric to Next-Hop**: The route with the shortest internal path (OSPF/IS-IS cost) to reach the BGP Next-Hop wins.

---

## 4. Understanding Route Selection (Policy-Based Routing)

"Route Selection" isn't just a passive calculation; it’s how you, the engineer, manipulate those attributes to control traffic.

* **Influencing Outbound Traffic:** You use **Local Preference**. If you have two ISPs and want to use ISP-A for all traffic, you set a higher Local Pref for routes coming from ISP-A.
* **Influencing Inbound Traffic:** This is harder because you're trying to control someone else's routers. You usually use **AS-Path Prepending** (making your AS-Path look artificially longer to certain neighbors) or **MED**.

### The Route Map (The Tool)

To change these attributes, we use **Route Maps**. Think of a Route Map like an `if/then` statement:

* *Match* a specific prefix (e.g., 8.8.8.0/24).
* *Set* an attribute (e.g., set Local-Preference to 200).

---

## 5. Summary Note

In your **Seattle -> Colorado -> Chicago -> New York** example:

* **OSPF** ensures Seattle can "see" New York (the Next-Hop).
* **BGP Path Attributes** (like AS-Path) tell Seattle if the path through New York is better than a path through a different border router (say, one in Miami).
* **Route Reflectors** ensure that these Path Attributes are passed from New York to Seattle without needing a direct physical or logical connection between them.
